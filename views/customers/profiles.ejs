<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/page/head.ejs %>
</head>
<header>
    <% include ../partials/page/header.ejs %>
</header>

<% include ../partials/page/jsdefaults.ejs %>

<div class="container">
    <h2>Customer's Profile</h2>

    <div align="center">
        <form name="search_customer" method="post" action="/customers/profiles"
              id="search_customer">

            <select name="customerID"
                    class="form-control select select-info"
                    data-toggle="select" form="search_customer"
                    onchange='this.form.submit()'>
                <% for(var i = 0; i < data.length; i++) { %>

                <% if(data[i].customerID === searchCustomer.customerID) { %>

                <option value=<%= data[i].customerID %> selected> <%= data[i].customerID %>
                    (<%= data[i].nickname %>)
                </option>
                <% } else { %>
                <option value=<%= data[i].customerID %>><%= data[i].customerID %>
                    (<%= data[i].nickname %>)
                </option>
                <% } %>

                <% } %>

            </select>

        </form>
    </div>


    <form method="post" action="/customers/edit" id="customer_form">
        <div align="center">
            <input type="hidden" value="<%= searchCustomer.id %>" name="id"/>
            <input type="hidden" value="<%= searchCustomer.customerID %>"
                   name="customerID"/>

            <div class="login-form" style="width:350px; margin-top: 30px; ">
                <div style="text-align:left; margin-left: 100px;">

                    <label class="checkbox" for="checkbox1">
                        <input name="malay" type="checkbox" value=1
                               id="checkbox1"
                               data-toggle="checkbox"
                                >
                        Malay
                    </label>
                    <label class="checkbox" for="checkbox2">
                        <input name="thai" type="checkbox"
                               value=1 id="checkbox2" data-toggle="checkbox"
                                >
                        Thai
                    </label>
                    <script>
                        document.getElementById("checkbox1").checked = <%=searchCustomer.malay%>;
                        document.getElementById("checkbox2").checked = <%=searchCustomer.thai%>;
                    </script>
                </div>
                <div class="form-group">
                    Nickname
                    <input type="text" class="form-control login-field"
                           placeholder="Nickname" name="nickname"
                           value="<%= searchCustomer.nickname %>"/>
                </div>
                <div class="form-group">
                    Phone <input type="text" class="form-control login-field"
                                 placeholder="Phone" name="phone"
                                 value="<%= searchCustomer.phone %>"/>
                </div>
                <div class="form-group">
                    Line ID<input type="text" class="form-control login-field"
                                  placeholder="Line ID" name="lineID"
                                  value="<%= searchCustomer.lineID %>"/>
                </div>

                <div class="form-group">
                    Percent<input type="text" class="form-control login-field"
                                  placeholder="Percent" name="percent"
                                  value="<%= searchCustomer.percent %>"/>
                </div>


                <div style="margin-bottom: 30px ">
                    Payment Condition
                    <select name="paymentCondition"
                            class="form-control select select-info"
                            data-toggle="select" form="customer_form"
                            id='selectType'
                            >
                        <option value="Type 1"> Type 1</option>
                        <option value="Type 2"> Type 2</option>
                        <option value="Type 3"> Type 3</option>
                        <option value="Type 4"> Type 4</option>
                        <option value="No Type" selected> No Type</option>


                    </select>
                    <script>
                        var element = document.getElementById('selectType');
                        element.value = "<%=searchCustomer.paymentCondition%>";
                    </script>
                </div>
                <input class="btn btn-primary btn-lg btn-block"
                       type="submit" value="Save Edit"/>
            </div>


        </div>
    </form>

    <% if (typeof error != 'undefined' & error != "") { %>

    <div align="center" style="margin:25px auto; width:200px;">
        <div class="form-group has-success">
            <input style="text-align:center" type="text" value=""
                   placeholder="<%= error %>" class="form-control"/>
        </div>
    </div>
    <% } %>


    <div align="center">
        <% for(var i = 0; i < searchCustomer.bank.length; i++) { %>
        <form method="post" action="/customers/bank/edit/<%=searchCustomer.id%>/<%=searchCustomer.bank[i].id%>" id="customer_form_<%=i%>">
        <div class="login-form" style="width:550px; margin-top: 30px; ">
            <strong>Bank <%= i + 1%></strong>

            <input type="hidden" value="<%= searchCustomer.id %>" name="id"/>

            <div class="form-group">
                Bank Number<input type="text" class="form-control login-field"
                                  placeholder="Bank Number" name="bankNumber"
                                  value="<%= searchCustomer.bank[i].bankNumber %>"/>
            </div>
            <div class="form-group">
                Bank Name<input type="text" class="form-control login-field"
                                placeholder="Bank Name" name="bankName"
                                value="<%= searchCustomer.bank[i].bankName %>"/>
            </div>

            <div style="margin-bottom: 30px ">
                BankType
                <br>
                <select name="bankType"
                        class="form-control select select-info"
                        data-toggle="select" form="customer_form_<%=i%>"
                        id='selectBankType'
                        >
                    <option value="BBL"> BBL</option>
                    <option value="TFB"> TFB</option>
                    <option value="SCB"> SCB</option>


                </select>
                <script>
                    var element = document.getElementById('selectBankType');
                    element.value = "<%=searchCustomer.bank[i].bankType%>";
                </script>
            </div>
            <input class="btn btn-primary btn-lg btn-block"
                   type="submit" value="Save Edit"/>
        </div>
        <% } %>



    </div>
</div>
